(this.webpackJsonpreact_weather=this.webpackJsonpreact_weather||[]).push([[0],{122:function(t,e,a){t.exports=a(123)},123:function(t,e,a){"use strict";a.r(e);var n=a(103),o=a(104),r=a(117),s=a(105),i=a(118),c=a(0),l=a.n(c),d=a(3),m=a.n(d),u=(a(128),a(129),a(218)),h=a(30),p=a(77),g=a(106),_=a.n(g),y=a(107),f=a.n(y),w=u.a.Search,E=new Date,b={"clear-day":"\u6674\u5929","clear-night":"\u6e05\u591c",cloudy:"\u591a\u4e91",fog:"\u96fe","partly-cloudy-day":"\u5c40\u90e8\u591a\u4e91","partly-cloudy-night":"\u5c40\u90e8\u591a\u4e91",wind:"\u5927\u98ce",snow:"\u96ea",rain:"\u96e8",sleet:"\u96e8\u5939\u96ea"},M=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(r.a)(this,Object(s.a)(e).call(this,t))).fetchData=function(t,e){f()(t).then((function(t){return t.json()})).then((function(t){e(t)})).catch((function(t){console.log(t)}))},a.getData=function(t,e){_.a.get(t).then((function(t){e(t)})).catch((function(t){console.log(t)}))},a.windDirection=function(t){return t>0&&t<=90?"\u4e1c\u5317\u98ce":t>90&&t<=180?"\u4e1c\u5357\u98ce":t>180&&t<=270?"\u897f\u5357\u98ce":t>270&&t<=360?"\u897f\u5317\u98ce":0===t?"\u672a\u77e5":void 0},a.getLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){a.setState({lat:t.coords.latitude,lng:t.coords.longitude,baseUrl:"https://api.darksky.net/forecast/fab65de022b3477cc37e14796f99627b/"+t.coords.latitude+", "+t.coords.longitude+"?lang=zh&units=si"},(function(t){a.fetchData(a.state.baseUrl,(function(t){a.setState({timezone:t.timezone,current_data:t.currently,today_data:t.daily.data[0],tomorrow_data:t.daily.data[1],day_after_tomorrow_data:t.daily.data[2],loading:!1})}))}))})):console.log("Geolocation is not supported by this browser")},a.state={baseUrl:"https://api.darksky.net/forecast/fab65de022b3477cc37e14796f99627b/37.8267,-122.4233?lang=zh&units=si",timezone:"",lat:"",lng:"",current_data:{},today_data:{},tomorrow_data:{},day_after_tomorrow_data:{},loading:!0},a}return Object(i.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){this.getLocation()}},{key:"render",value:function(){var t=this;return l.a.createElement("div",{className:"Main",style:{backgroundImage:"url('pic/"+this.state.current_data.icon+"bg.png')"}},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"search"},l.a.createElement(w,{className:"searchBar",placeholder:"\u8bf7\u8f93\u5165\u57ce\u5e02\u540d",enterButton:!0,size:"large",onSearch:function(e){t.getData("https://maps.googleapis.com/maps/api/geocode/json?address="+e+"&key=AIzaSyBO6BM6qEG3f7yNdUyEtZG20H3pdCbnM88",(function(e){t.setState({baseUrl:"https://api.darksky.net/forecast/fab65de022b3477cc37e14796f99627b/"+e.data.results[0].geometry.location.lat+", "+e.data.results[0].geometry.location.lng+"?lang=zh&units=si"},(function(){t.fetchData(t.state.baseUrl,(function(e){t.setState({timezone:e.timezone,current_data:e.currently,today_data:e.daily.data[0],tomorrow_data:e.daily.data[1],day_after_tomorrow_data:e.daily.data[2],loading:!1})}))}))}))}})),l.a.createElement("div",{className:"weather"},l.a.createElement("span",{className:"temperature"},Math.round(this.state.current_data.temperature)+"\xb0C"),l.a.createElement("span",{className:"weatherIconText"},l.a.createElement("span",{className:"weather-text"},b[this.state.current_data.icon]),l.a.createElement("img",{src:"pic/"+this.state.current_data.icon+".png",className:"weather-icon",alt:""})),l.a.createElement("span",{className:"wind"},this.windDirection(this.state.current_data.windBearing)),l.a.createElement("img",{className:"windDirection-icon",src:"pic/windDirection.png",alt:""}),l.a.createElement("span",{className:"sunriseToSunset"},l.a.createElement("img",{className:"sunrise",src:"pic/sunrise.png",alt:""}),l.a.createElement("span",{className:"line"}),l.a.createElement("img",{className:"sunset",src:"pic/sunset.png",alt:""}),l.a.createElement("span",{className:"time"},l.a.createElement("span",{className:"sunriseTime"},new Date(E.setTime(1e3*this.state.today_data.sunriseTime)).toLocaleTimeString("en-US",{timeZone:this.state.timezone})),l.a.createElement("span",{className:"sunsetTime"},new Date(E.setTime(1e3*this.state.today_data.sunsetTime)).toLocaleTimeString("en-US",{timeZone:this.state.timezone}))))),l.a.createElement("div",{className:"forecast"},l.a.createElement(h.a,null,l.a.createElement(h.a.Item,null,l.a.createElement(h.a.Item.Meta,{avatar:l.a.createElement(p.a,{src:"pic/"+this.state.today_data.icon+".png"}),title:new Date(E.setTime(1e3*this.state.today_data.time)).toLocaleDateString("en-US",{timeZone:this.state.timezone}),description:Math.round(this.state.today_data.temperatureMin)+"\xb0C-"+Math.round(this.state.today_data.temperatureMax)+"\xb0C"}),l.a.createElement("span",{style:{fontWeight:"bold"}},b[this.state.today_data.icon])),l.a.createElement(h.a.Item,null,l.a.createElement(h.a.Item.Meta,{avatar:l.a.createElement(p.a,{src:"pic/"+this.state.tomorrow_data.icon+".png"}),title:new Date(E.setTime(1e3*this.state.tomorrow_data.time)).toLocaleDateString("en-US",{timeZone:this.state.timezone}),description:Math.round(this.state.tomorrow_data.temperatureMin)+"\xb0C-"+Math.round(this.state.tomorrow_data.temperatureMax)+"\xb0C"}),l.a.createElement("span",{style:{fontWeight:"bold"}},b[this.state.tomorrow_data.icon])),l.a.createElement(h.a.Item,null,l.a.createElement(h.a.Item.Meta,{avatar:l.a.createElement(p.a,{src:"pic/"+this.state.day_after_tomorrow_data.icon+".png"}),title:new Date(E.setTime(1e3*this.state.day_after_tomorrow_data.time)).toLocaleDateString("en-US",{timeZone:this.state.timezone}),description:Math.round(this.state.day_after_tomorrow_data.temperatureMin)+"\xb0C-"+Math.round(this.state.day_after_tomorrow_data.temperatureMax)+"\xb0C"}),l.a.createElement("span",{style:{fontWeight:"bold"}},b[this.state.day_after_tomorrow_data.icon]))))))}}]),e}(l.a.Component);m.a.render(l.a.createElement(M,null),document.getElementById("root"))},129:function(t,e,a){}},[[122,1,2]]]);
//# sourceMappingURL=main.089647e2.chunk.js.map